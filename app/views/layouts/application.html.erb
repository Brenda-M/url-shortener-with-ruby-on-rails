<!DOCTYPE html>
<html>
  <head>
    <title>UrlShortener</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%=
      stylesheet_link_tag 'tailwind', 'inter-font', 'data-turbo-track': 'reload'
    %>
    <%= stylesheet_link_tag 'application', 'data-turbo-track': 'reload' %>
    <%=
      stylesheet_link_tag 'application',
                          :media => 'all',
                          'data-turbolinks-track' => true
    %>
    <%= javascript_importmap_tags %>
    <script>
      if (performance.navigation.type === 1) {
        window.location.href =
          window.location.origin + window.location.pathname;
      }
    </script>
  </head>
  <body class="flex flex-col min-h-screen bg-main">
    <%= render 'shared/navbar' %>
    <div class="container mx-auto mt-4 p-2 flex flex-col relative">
      <% flash.each do |type, msg| %>
        <div
          class="<%= flash_class %> absolute top-0 left-1/2 transform -translate-x-1/2 max-w-md mx-auto text-center px-4 py-2 rounded mb-4 flash-message opacity-100 transition-opacity duration-300 sm:w-full md:w-2/3 lg:w-1/2 xl:w-1/3"
        >
          <%= msg %>
          <script>
            setTimeout(function () {
              var flashMessage = document.querySelector(".flash-message");
              flashMessage.style.opacity = "0";
              setTimeout(function () {
                flashMessage.style.display = "none";
              }, 300);
            }, 3000);
          </script>
        </div>
      <% end %>
      <%= yield %>
    </div>
  </body>
</html>
